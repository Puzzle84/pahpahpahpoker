define(["table","deck","exports"],function(e,t,n){function r(){this.dealCards=function(e,t){var n=[];for(var r=0;r<t;r++)n.push(e.getTopCard());return n},this.score=function(e){var t=null,n=null,r=e.findPlayersStillPlaying(),i=e.getOpenCards();for(var s=0;s<r.length;s++){var o=r[s],u=i.concat(o.showHand()).sort(this.cardComperator),a=null,f=null,l=null,c=2,h=0,p=!1,d=!1,v=!1;for(var m=0;m<u.length;m++){l=this.findFlush(u),l===9?h<9&&(h=9):l===8?h<8&&(h=8):l===5?h<5&&(h=5):l===4&&h<4&&(h=4);if(h<8&&u[m].getValue()!==f){f=u[m].getValue();var g=this.findOccurences(u[m],u);g>3?h<7&&(h=7):g>2?(v===!0?h<6&&(h=6):d===!0?h<6&&(h=6):p===!0&&h<6&&(h=6),v=!0,h<3&&(h=3)):g>1&&(v===!0?h<6&&(h=6):p===!0&&(h<2&&(h=2),d=!0),h<1&&(h=1),p=!0)}}c=this.findHighestCard(u);var y=$("#"+e.getName()+" .players #"+o.getName());h===9?y.append("<span>Royal Flush with the "+c.getFace()+" of "+c.getSuit()+" </span>"):h===8?y.append("<span>Royal Flush with the "+c.getFace()+" of "+c.getSuit()+" </span>"):h===7?y.append("<span>Four of a kind with the "+c.getFace()+" of "+c.getSuit()+" </span>"):h===6?y.append("<span>Fullhouse with the "+c.getFace()+" of "+c.getSuit()+" </span>"):h===5?y.append("<span>Flush with the "+c.getFace()+" of "+c.getSuit()+" </span>"):h===4?y.append("<span>Straight with the "+c.getFace()+" of "+c.getSuit()+" </span>"):h===3?y.append("<span>Three of a kind with the "+c.getFace()+" of "+c.getSuit()+" </span>"):h===2?y.append("<span>Two pair with the "+c.getFace()+" of "+c.getSuit()+" </span>"):h===1?y.append("<span>Pair with the "+c.getFace()+" of "+c.getSuit()+" </span>"):y.append("<span>"+c.getFace()+" of "+c.getSuit()+" </span>")}},this.cardComperator=function(e,t){return parseInt(e.getValue(),10)-parseInt(t.getValue(),10)},this.hasStraight=function(e){var t=e.slice(0,5),n=!0,r=null;for(var i=0;i<t.length;i++)r===null?r=t[i].getValue():r+1!==t[i]&&(n=!1);if(n===!0)return!0;n=!0,r=null;var s=e.slice(1,6);for(var o=0;o<s.length;o++)r===null?r=s[o].getValue():r+1!==s[o]&&(n=!1);if(n===!0)return!0;var u=e.slice(2,7);n=!0,r=null;for(var a=0;a<u.length;a++)r===null?r=u[a].getValue():r+1!==u[a]&&(n=!1);return n===!0?!0:!1},this.findFlush=function(e){var t=[[],[],[],[]],n=this.hasStraight(e);for(var r=0;r<e.length;r++){var i=e[r].getSuit();i==="Hearts"?t[0].push(e[r]):i==="Diamonds"?t[1].push(e[r]):i==="Clubs"?t[2].push(e[r]):i==="Spades"&&t[3].push(e[r])}for(var s=0;s<t.length;s++)if(t[s].length===5){var o=!0,u=null;for(var a=0;a<t[s].length;a++)u===null?u=t[s][a].getValue():u+1!==t[s][a].getValue()&&(o=!1);if(o===!0&&t[s][0].getValue()===10)return 9;if(o===!0)return 9;if(o!==!0)return 5;if(n===!0)return 4}},this.findOccurences=function(e,t){var n=0;for(var r=0;r<t.length;r++)e.getValue()===t[r].getValue()&&n++;return n},this.findHighestCard=function(e){var t=null;for(var n=0;n<e.length;n++){var r=e[n];t===null?t=r:r.getValue()>t.getValue()&&(t=r)}return t}}n.logic=r})