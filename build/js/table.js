define(["player","dealer","exports"],function(e,t,n){function r(){this.ID=null,this.Name=null,this.minbet=null,this.maxbet=null,this.tablepot=null,this.sidepot=null,this.players=[],this.opencards=[],this.init=function(e,n,r,i){this.ID=e,this.Name=n,this.minbet=r,this.maxbet=i,this.dealer=new t.dealer,this.dealer.init(e,this)},this.getId=function(){return this.ID},this.getName=function(){return this.Name},this.getMinBet=function(){return this.minbet},this.getMaxBet=function(){return this.maxbet},this.getTablePot=function(){return this.tablepot},this.getSidePot=function(){return this.sidepot},this.getOpenCards=function(){return this.opencards},this.addOpenCards=function(e){for(var t=0;t<e.length;t++){var n=$("#"+this.Name+" .dealer .status");n.append("<div class=card><span>"+e[t].getSuit()+" "+e[t].getValue()+"</span></div>")}var r=this.opencards.concat(e);this.opencards=r},this.addToPot=function(e){var t=this.findPlayersStillPlaying(),n=this.findLowestPurse();e<=n?this.addToTablePot(e):(this.addToTablePot(n),this.addtoSidePot(e-n))},this.addToTablePot=function(e){this.tablepot+=e},this.addtoSidePot=function(e){this.sidepot+=e},this.addPlayer=function(e){this.players.push(e);var t=$("#"+this.getName()+".status");t.append("<span>"+e.getName()+" joined!</span>"),this.players.length>1?this.dealer.getDeck().getCards().length===0?(t.append("<span>enough players dealer initiated!</span>"),this.dealer.init()):(t.append("<span>enough players dealer re-activated!</span>"),this.dealer.resume()):(t.append("<span>not enough players dealer paused!</span>"),this.dealer.pause())},this.removePlayer=function(e){var t=$("#"+this.getName()+".status");t.append("<span>"+e.getName()+" left!</span>"),this.players.pop(e),this.checkIfTableIsEmpty()&&(t.append("<span>table is empty!</span>"),this.removeTable())},this.findPlayersStillPlaying=function(){var e=[];for(var t=0;t<this.players.length;t++)this.players[t].playing&&e.push(this.players[t]);return e},this.findLowestPurse=function(e,t){var n=null;for(var r=0;r<e.length;r++)n!==null&&n>e[r].getMoney()?n=t:n===null&&(n=t);return n},this.checkIfTableIsEmpty=function(){return this.players.length===0?!0:!1},this.closeTable=function(){for(var e=0;e<this.players.length;e++)this.removePlayer(players[e]);this.dealer.goHome(),this.dealer=null}}n.table=r})